================================================================================
                        SIGNALFRIEND FRONTEND TO-DO LIST
================================================================================

Last Updated: 2025-12-03
Branch: feature/purchase-flow (v0.8.0)

================================================================================
PHASE 1: CORE SCAFFOLD ✅ COMPLETE
================================================================================

[✅] Project Setup
    - Vite + React + TypeScript configuration
    - Tailwind CSS with dark theme
    - Path aliases (@/ for src/)

[✅] Web3 Integration
    - wagmi v2 configuration for BNB Chain
    - RainbowKit wallet connection UI
    - viem for blockchain interactions
    - Contract addresses config

[✅] Base UI Components
    - Button (5 variants: primary, secondary, danger, ghost, outline)
    - Input with label, error, helper text
    - Textarea
    - Select dropdown
    - Card with sub-components
    - Modal (accessible dialog)
    - Badge (status indicators)
    - Spinner / PageLoader
    - Avatar with fallback

[✅] Providers Setup
    - Web3Provider (wagmi + RainbowKit)
    - QueryProvider (TanStack Query)
    - SentryProvider (error boundary placeholder)

[✅] Router Setup
    - React Router v7 with placeholder pages
    - RootLayout with Header/Footer
    - Header with logo from branding assets
    - Routes: /, /signals, /predictors, /dashboard, /profile

[✅] API Layer
    - Axios client with interceptors
    - JWT token refresh logic
    - API endpoints configuration

[✅] State Management
    - Zustand auth store with persistence

[✅] Zod Schemas
    - API response schemas
    - Auth schemas
    - Signal schemas
    - Predictor schemas
    - Review schemas
    - Receipt schemas
    - Category schemas

[✅] Hooks
    - useAuth hook with SIWE authentication flow

[✅] Documentation
    - README.md with detailed setup instructions
    - PROJECT_CONTEXT.md
    - CHANGELOG.md
    - RUNBOOK.md
    - TO-DO-FRONTEND.txt (this file)

================================================================================
PHASE 2: AUTHENTICATION & WALLET ✅ COMPLETE
================================================================================

[✅] useAuth Hook Implementation
    - Login with wallet signature (SIWE)
    - Logout and disconnect wallet
    - Loading and error states
    - React Query mutation for async handling

[✅] Wallet Authentication Flow
    - Connect wallet button in header (RainbowKit)
    - AuthButton component (Connect → Sign In → Sign Out flow)
    - Sign message for authentication (SIWE pattern)
    - Auto-reconnect on page refresh (wagmi persistence)

[✅] Auth API Integration
    - GET /api/auth/nonce - get signing nonce
    - POST /api/auth/verify - verify signature & get JWT
    - Token storage in Zustand + localStorage
    - Proper API response unwrapping

[✅] Header Navigation
    - Shows "My Signals" and "Dashboard" only when authenticated
    - AuthButton shows correct state (Connect/Sign In/Sign Out)

[✅] JSDoc Documentation (Added in v0.3.0)
    - All UI components (Button, Input, Card, etc.)
    - Auth feature files (hooks, API, components, store)
    - Providers (Web3, Query, Sentry)
    - Router files (Header, RootLayout, index)
    - Config files (env, api.config, wagmi, contracts)
    - Hooks (useAuth, useIsAdmin, useIsPredictor)
    - Utils (cn, format)
    - API client and types/schemas
    - Each file includes examples, accessibility notes, flow diagrams

[✅] Protected Routes (Added in v0.4.0)
    - ProtectedRoute - requires wallet + SIWE auth
    - PredictorRoute - requires predictor registration
    - PredictorRoute (requireVerified) - requires verified status
    - AdminRoute - requires admin wallet address
    - All guards redirect with state (from path, message)
    - Added /become-predictor route for predictor registration

[✅] Landing Page (Added in v0.5.0)
    - HeroSection with tagline, value prop, CTAs, trust indicators
    - FeaturesSection with 6-card grid of key features
    - HowItWorksSection with tab-based Buyer/Predictor guides
    - CTASection with stats and final conversion CTA
    - HomePage composing all sections
    - Barrel exports for home feature
    - Router updated to use HomePage at root path

[ ] User Profile Page
    - Display wallet address
    - Show role/predictor status
    - Edit profile form (for predictors)

================================================================================
PHASE 3: SIGNALS FEATURE (PRIORITY: HIGH)
================================================================================

[✅] Signals List Page (/signals) - Added in v0.6.0
    - API functions (fetchSignals, fetchCategories, etc.)
    - React Query hooks (useSignals, useCategories)
    - SignalCard component with risk/reward badges
    - FilterPanel with category, risk, reward, price filters
    - SignalGrid with loading/empty/error states
    - Pagination component
    - SignalsPage combining all components
    - URL-synced filters (shareable/bookmarkable)
    - Mobile-responsive collapsible filters

[✅] Signal Detail Page (/signals/:contentId) - Added in v0.7.0
    - SignalDetailPage with full signal info
    - SignalDetailSkeleton for loading state
    - PredictorInfoCard with avatar, stats, bio
    - PurchaseCard with dynamic button states
    - SignalContent with locked/unlocked views
    - Breadcrumb navigation
    - Share buttons (copy link, Twitter)
    - Error state for missing signals

[✅] Purchase Flow - Added in v0.8.0
    - Contract ABIs (SignalFriendMarket, ERC20) in shared/config/abis
    - Purchase API functions (fetchContentIdentifier, checkPurchase, fetchMyReceipts)
    - React Query hooks for purchase flow:
      - useCheckPurchase - check if user owns signal
      - useContentIdentifier - get bytes32 for on-chain call
      - useUSDTBalance - check user's USDT balance
      - useUSDTAllowance - check spending allowance
      - useApproveUSDT - approve USDT spending
      - useBuySignal - execute buySignalNFT contract call
      - usePurchaseFlow - combined hook for entire flow
    - PurchaseModal component with multi-step flow:
      - Balance check step
      - USDT approval step (if needed)
      - Purchase execution step
      - Success/error states
    - SignalDetailPage integration:
      - Real ownership check via useCheckPurchase
      - Purchase modal trigger
      - Auto-refresh on successful purchase
    - Backend endpoint: GET /api/signals/:contentId/content-identifier

[ ] My Purchased Signals
    - List user's receipts/purchases
    - Access protected content
    - Leave review functionality

================================================================================
PHASE 4: PREDICTOR FEATURES (PRIORITY: MEDIUM)
================================================================================

[ ] Predictor List Page (/predictors)
    - Fetch predictors with stats
    - Filter by rating, verification
    - Predictor cards with avatars

[ ] Predictor Profile Page (/predictors/:wallet)
    - Full profile info
    - Statistics (signals, sales, rating)
    - List of active signals
    - Reviews section

[ ] Become a Predictor Flow
    - Check if user owns PredictorAccessPass NFT
    - If not, show purchase option
    - Call registerPredictor contract method
    - Update role in backend

[ ] Predictor Dashboard (/dashboard - predictor only)
    - Sales statistics
    - Revenue charts
    - Active signals management
    - Create new signal form

[ ] Create Signal Form
    - Multi-step form wizard
    - Category selection
    - Risk/reward settings
    - Pricing
    - Protected content editor
    - Preview before publish
    - Submit to API

================================================================================
PHASE 5: REVIEWS & RATINGS (PRIORITY: MEDIUM)
================================================================================

[ ] Review System
    - Star rating component
    - Review form after purchase
    - Submit review to API
    - Display reviews on predictor page

[ ] Rating Display
    - Average rating badge
    - Rating breakdown chart
    - Recent reviews list

================================================================================
PHASE 6: ADMIN FEATURES (PRIORITY: LOW)
================================================================================

[ ] Admin Dashboard (/admin - admin only)
    - Platform statistics
    - User management
    - Signal moderation
    - Category management

[ ] Verification Management
    - Pending verifications list
    - Approve/reject predictor
    - Blacklist functionality

[ ] Reports Management
    - View reported content
    - Take action on reports

================================================================================
PHASE 7: POLISH & OPTIMIZATION (PRIORITY: LOW)
================================================================================

[ ] Performance
    - React.lazy for route splitting
    - Image optimization
    - Query caching strategies
    - Debounced search inputs

[ ] UX Improvements
    - Toast notifications
    - Loading skeletons
    - Optimistic updates
    - Error recovery

[ ] Accessibility
    - Keyboard navigation
    - Screen reader support
    - Focus management
    - ARIA labels

[ ] Mobile Responsiveness
    - Mobile navigation menu
    - Touch-friendly interactions
    - Responsive layouts

[ ] SEO & Meta
    - React Helmet for meta tags
    - Open Graph tags
    - Twitter cards

================================================================================
KNOWN ISSUES / BUGS
================================================================================

[✅] FIXED: SignalCard shows "Expired" for all signals (v0.8.1)
    - Location: src/features/signals/components/SignalCard.tsx
    - Problem: getExpiryInfo() was called with createdAt date (always in the past)
    - Solution: Added expiresAt field to backend Signal model
    - Predictors now set expiryDays (1-30) when creating signals
    - SignalCard and SignalDetailPage now use real expiresAt
    - Migration script added for existing signals

================================================================================
TECHNICAL DEBT
================================================================================

[ ] Add comprehensive error handling to all API calls
[ ] Add unit tests for components
[ ] Add integration tests for flows
[ ] Add E2E tests with Playwright
[ ] Set up Sentry error tracking (currently placeholder)
[ ] Configure proper CSP headers
[ ] Add rate limiting feedback to users

================================================================================
DEPENDENCIES TO WATCH
================================================================================

- wagmi: Currently v2, watch for v3 updates
- RainbowKit: Keep in sync with wagmi version
- viem: Core blockchain library
- TanStack Query: v5, stable
- Zustand: v4, stable
- React Router: v6, stable

================================================================================
NOTES
================================================================================

1. Always test wallet flows on BSC Testnet (chainId: 97) before mainnet
2. Use the WalletConnect projectId from .env.local for wallet connections
3. API URL defaults to http://localhost:3001 for local development
4. Frontend runs on port 5173 (Vite default)

================================================================================
